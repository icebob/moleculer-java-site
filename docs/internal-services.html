<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>About Internal Services | Moleculer</title>
    <meta name="description" content="Progressive microservices framework for Java">
    <link rel="icon" href="favicon.ico">
    
    <link rel="preload" href="/site/assets/css/0.styles.b6212ebb.css" as="style"><link rel="preload" href="/site/assets/js/app.f5c17ca8.js" as="script"><link rel="preload" href="/site/assets/js/2.bdb50750.js" as="script"><link rel="preload" href="/site/assets/js/14.67e89b3a.js" as="script"><link rel="prefetch" href="/site/assets/js/10.de3addcd.js"><link rel="prefetch" href="/site/assets/js/11.4ae64467.js"><link rel="prefetch" href="/site/assets/js/12.d4fede36.js"><link rel="prefetch" href="/site/assets/js/13.941fe273.js"><link rel="prefetch" href="/site/assets/js/15.906193b4.js"><link rel="prefetch" href="/site/assets/js/16.35160870.js"><link rel="prefetch" href="/site/assets/js/17.629d881a.js"><link rel="prefetch" href="/site/assets/js/18.bc44ed6d.js"><link rel="prefetch" href="/site/assets/js/19.52e353e0.js"><link rel="prefetch" href="/site/assets/js/20.7a1954f5.js"><link rel="prefetch" href="/site/assets/js/21.b918c142.js"><link rel="prefetch" href="/site/assets/js/22.276bb066.js"><link rel="prefetch" href="/site/assets/js/23.59ab5144.js"><link rel="prefetch" href="/site/assets/js/24.fb6bc053.js"><link rel="prefetch" href="/site/assets/js/25.c013eb92.js"><link rel="prefetch" href="/site/assets/js/26.6dfdcdc7.js"><link rel="prefetch" href="/site/assets/js/27.e4872458.js"><link rel="prefetch" href="/site/assets/js/28.4c2fee07.js"><link rel="prefetch" href="/site/assets/js/29.3c75b62f.js"><link rel="prefetch" href="/site/assets/js/3.1856e10f.js"><link rel="prefetch" href="/site/assets/js/4.95537bde.js"><link rel="prefetch" href="/site/assets/js/5.3e73d5df.js"><link rel="prefetch" href="/site/assets/js/6.26bd01c0.js"><link rel="prefetch" href="/site/assets/js/7.48634747.js"><link rel="prefetch" href="/site/assets/js/8.3608d263.js"><link rel="prefetch" href="/site/assets/js/9.8e404a4d.js">
    <link rel="stylesheet" href="/site/assets/css/0.styles.b6212ebb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/site/" class="home-link router-link-active"><img src="logo.png" alt="Moleculer" class="logo"> <span class="site-name can-hide">Moleculer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/site/" class="nav-link">Home</a></div><div class="nav-item"><a href="/site/introduction.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="https://www.patreon.com/berkesa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Donate
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/moleculer-java/moleculer-java" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/site/" class="nav-link">Home</a></div><div class="nav-item"><a href="/site/introduction.html" class="nav-link">Documentation</a></div><div class="nav-item"><a href="https://www.patreon.com/berkesa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Donate
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/moleculer-java/moleculer-java" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting started</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Moleculer core</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/site/broker.html" class="sidebar-link">Service Broker</a></li><li><a href="/site/services.html" class="sidebar-link">Services</a></li><li><a href="/site/lifecycle.html" class="sidebar-link">Lifecycle</a></li><li><a href="/site/actions.html" class="sidebar-link">Actions</a></li><li><a href="/site/middlewares.html" class="sidebar-link">Middlewares</a></li><li><a href="/site/caching.html" class="sidebar-link">Caching</a></li><li><a href="/site/events.html" class="sidebar-link">Events</a></li><li><a href="/site/internal-services.html" class="active sidebar-link">Internal Services</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/site/internal-services.html#about-internal-services" class="sidebar-link">About Internal Services</a></li><li class="sidebar-sub-header"><a href="/site/internal-services.html#list-of-nodes" class="sidebar-link">List of nodes</a></li><li class="sidebar-sub-header"><a href="/site/internal-services.html#list-of-services" class="sidebar-link">List of Services</a></li><li class="sidebar-sub-header"><a href="/site/internal-services.html#list-of-actions" class="sidebar-link">List of Actions</a></li><li class="sidebar-sub-header"><a href="/site/internal-services.html#list-of-event-subscriptions" class="sidebar-link">List of event subscriptions</a></li><li class="sidebar-sub-header"><a href="/site/internal-services.html#health-of-node" class="sidebar-link">Health of node</a></li></ul></li><li><a href="/site/logging.html" class="sidebar-link">Logging</a></li><li><a href="/site/runner.html" class="sidebar-link">Runner</a></li><li><a href="/site/tasks.html" class="sidebar-link">Background processes</a></li><li><a href="/site/performance-tips.html" class="sidebar-link">Performance tips</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Clustering</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Modules</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="about-internal-services"><a href="#about-internal-services" class="header-anchor">#</a> About Internal Services</h2> <p>The <code>ServiceBroker</code> contains some internal <code>Services</code> to check the node health or get some registry information.
These services can be disabled by setting &quot;internalServices&quot; parameter to &quot;false&quot; in
<a href="/site/broker.html#create-a-service-broker">ServiceBrokerConfig</a>:</p> <div class="language-java extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-java"><code><span class="token class-name">ServiceBrokerConfig</span> cfg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServiceBrokerConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cfg<span class="token punctuation">.</span><span class="token function">setInternalServices</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Disable Internal Services</span>
<span class="token class-name">ServiceBroker</span> broker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServiceBroker</span><span class="token punctuation">(</span>cfg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="list-of-nodes"><a href="#list-of-nodes" class="header-anchor">#</a> List of nodes</h2> <p>The &quot;$node.list&quot; <code>Action</code> lists all known nodes (including local node).</p> <div class="language-java extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code>broker<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;$node.list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>rsp <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">// Print JSON response</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>rsp<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Example processing of the response (print IPs of nodes):</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Tree</span> nodeInfo<span class="token operator">:</span> rsp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Node ID: &quot;</span> <span class="token operator">+</span> nodeInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Tree</span> ip<span class="token operator">:</span> nodeInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;ipList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot; IP address: &quot;</span> <span class="token operator">+</span> ip<span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Sample response</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>[
  {
    &quot;id&quot;:&quot;node1&quot;,
    &quot;available&quot;:true,
    &quot;lastHeartbeatTime&quot;:1579023883101,
    &quot;cpu&quot;:8,
    &quot;port&quot;:0,
    &quot;hostname&quot;:&quot;tsmith-pc&quot;,
    &quot;ipList&quot;:[
      &quot;192.168.12.13&quot;,
      &quot;fe80:0:0:0:0:6efe:c0a8:3348%net4&quot;,
      ...
    ],
    &quot;client&quot;:{
      &quot;type&quot;:&quot;java&quot;,
      &quot;version&quot;:&quot;1.2.5&quot;,
      &quot;langVersion&quot;:&quot;1.8.0_162-ea&quot;
    }
  }
]

Node ID: node1
 IP address: 192.168.12.13
 IP address: fe80:0:0:0:0:6efe:c0a8:3348%net4
 IP address: fe80:0:0:0:0:110:7f:fffe%net5
 IP address: fe80:0:0:0:4514:d05f:4195:80d8%eth5
 IP address: fe80:0:0:0:9802:43e:ce67:4c25%eth6
</code></pre></div><p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>withServices</td> <td>Boolean</td> <td>false</td> <td>List with services.</td></tr></tbody></table> <h2 id="list-of-services"><a href="#list-of-services" class="header-anchor">#</a> List of Services</h2> <p>The &quot;$node.services&quot; <code>Action</code> lists all registered <code>Services</code> (local &amp; remote).</p> <div class="language-java extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code>broker<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;$node.services&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>rsp <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">// Print JSON response</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>rsp<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Example processing of the response (print nodeIDs of Services):</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Tree</span> serviceInfo<span class="token operator">:</span> rsp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Service: &quot;</span> <span class="token operator">+</span> serviceInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Tree</span> nodeID<span class="token operator">:</span> serviceInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;nodes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;  Node ID: &quot;</span> <span class="token operator">+</span> nodeID<span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Sample response</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>[
  {
    &quot;name&quot;:&quot;api-gw&quot;,
    &quot;nodes&quot;:[
      &quot;tsmith-pc-7700&quot;
    ],
    &quot;settings&quot;:null,
    &quot;metadata&quot;:null
  },
  {
    &quot;name&quot;:&quot;chatService&quot;,
    &quot;nodes&quot;:[
      &quot;tsmith-pc-7700&quot;
    ],
    &quot;settings&quot;:null,
    &quot;metadata&quot;:null
  },
  {
    &quot;name&quot;:&quot;upload&quot;,
    &quot;nodes&quot;:[
      &quot;tsmith-pc-7700&quot;
    ],
    &quot;settings&quot;:null,
    &quot;metadata&quot;:null
  }
]

Service: api-gw
  Node ID: tsmith-pc-7700
Service: chatService
  Node ID: tsmith-pc-7700
Service: upload
  Node ID: tsmith-pc-7700
</code></pre></div><p><strong>Parameters</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>onlyLocal</td> <td>Boolean</td> <td>false</td> <td>List only local services.</td></tr> <tr><td>skipInternal</td> <td>Boolean</td> <td>false</td> <td>Skip the internal services (&quot;$node&quot;).</td></tr> <tr><td>withActions</td> <td>Boolean</td> <td>false</td> <td>List with actions.</td></tr></tbody></table> <h2 id="list-of-actions"><a href="#list-of-actions" class="header-anchor">#</a> List of Actions</h2> <p>The &quot;$node.actions&quot; <code>Action</code> lists all registered <code>Actions</code> (local &amp; remote).</p> <div class="language-java extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code>broker<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;$node.actions&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>rsp <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">// Print JSON response</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>rsp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Example processing of the response (print Actions and some attributes):</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Tree</span> actionInfo<span class="token operator">:</span> rsp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Action: &quot;</span> <span class="token operator">+</span> actionInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                    <span class="token string">&quot;, local: &quot;</span>  <span class="token operator">+</span> actionInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;hasLocal&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                    <span class="token string">&quot;, count: &quot;</span>  <span class="token operator">+</span> actionInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Sample response</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>[
  {
    &quot;name&quot;:&quot;$node.actions&quot;,
    &quot;count&quot;:1,
    &quot;hasLocal&quot;:true,
    &quot;available&quot;:true,
    &quot;action&quot;:{
      &quot;name&quot;:&quot;$node.actions&quot;
    }
  },
  {
    &quot;name&quot;:&quot;blog.clear&quot;,
    &quot;count&quot;:1,
    &quot;hasLocal&quot;:true,
    &quot;available&quot;:true,
    &quot;action&quot;:{
      &quot;name&quot;:&quot;blog.clear&quot;
    }
  },
  {
    &quot;name&quot;:&quot;jmx.findObjects&quot;,
    &quot;count&quot;:1,
    &quot;hasLocal&quot;:true,
    &quot;available&quot;:true,
    &quot;action&quot;:{
      &quot;name&quot;:&quot;jmx.findObjects&quot;
    }
  }
]

Action: $node.actions, local: true, count: 1
Action: blog.clear, local: true, count: 1
Action: jmx.findObjects, local: true, count: 1
</code></pre></div><p><strong>Options</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>onlyLocal</td> <td>Boolean</td> <td>false</td> <td>List only local actions.</td></tr> <tr><td>skipInternal</td> <td>Boolean</td> <td>false</td> <td>Skip the internal actions (&quot;$node&quot;).</td></tr> <tr><td>withEndpoints</td> <td>Boolean</td> <td>false</td> <td>List with endpoints <em>(nodes)</em>.</td></tr></tbody></table> <h2 id="list-of-event-subscriptions"><a href="#list-of-event-subscriptions" class="header-anchor">#</a> List of event subscriptions</h2> <p>The &quot;$node.events&quot; <code>Action</code> lists all event subscriptions.</p> <div class="language-java extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code>broker<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;$node.events&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>rsp <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">// Print JSON response</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>rsp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Example processing of the response (print Events and some attributes):</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Tree</span> eventInfo<span class="token operator">:</span> rsp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> subscription <span class="token operator">=</span> eventInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Subscription: &quot;</span> <span class="token operator">+</span> subscription<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Tree</span> event<span class="token operator">:</span> eventInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;event&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; = &quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Sample response</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>[
  {
    &quot;name&quot;:&quot;$services.changed&quot;,
    &quot;group&quot;:&quot;nettyServer&quot;,
    &quot;count&quot;:1,
    &quot;hasLocal&quot;:true,
    &quot;available&quot;:true,
    &quot;event&quot;:{
      &quot;name&quot;:&quot;$services.changed&quot;,
      &quot;group&quot;:&quot;nettyServer&quot;
    }
  },
  {
    &quot;name&quot;:&quot;websocket.send&quot;,
    &quot;group&quot;:&quot;api-gw&quot;,
    &quot;count&quot;:1,
    &quot;hasLocal&quot;:true,
    &quot;available&quot;:true,
    &quot;event&quot;:{
      &quot;name&quot;:&quot;websocket.send&quot;,
      &quot;group&quot;:&quot;api-gw&quot;
    }
  }
]

Subscription: $services.changed
 name = $services.changed
 group = nettyServer
Subscription: websocket.send
 name = websocket.send
 group = api-gw
</code></pre></div><p><strong>Options</strong></p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>onlyLocal</td> <td>Boolean</td> <td>false</td> <td>List only local subscriptions.</td></tr> <tr><td>skipInternal</td> <td>Boolean</td> <td>false</td> <td>Skip the internal event subscriptions &quot;$&quot;.</td></tr> <tr><td>withEndpoints</td> <td>Boolean</td> <td>false</td> <td>List with endpoints <em>(nodes)</em>.</td></tr></tbody></table> <h2 id="health-of-node"><a href="#health-of-node" class="header-anchor">#</a> Health of node</h2> <p>The &quot;$node.health&quot; <code>Action</code> returns the health info of local node (including process &amp; OS information).</p> <div class="language-java extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code>broker<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;$node.health&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>rsp <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>

    <span class="token comment">// Print JSON response</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>rsp<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Example processing of the response (print IPs and some attributes):</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;IP Addresses:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Tree</span> ip<span class="token operator">:</span> rsp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;net.ip&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span> <span class="token operator">+</span> ip<span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;CPU cores: &quot;</span> <span class="token operator">+</span> rsp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;cpu.cores&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;OS type: &quot;</span>   <span class="token operator">+</span> rsp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;os.type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Homedir: &quot;</span>   <span class="token operator">+</span> rsp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;os.user.homedir&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Sample response</strong></p> <div class="language-text extra-class"><pre class="language-text"><code>{
  &quot;cpu&quot;:{
    &quot;cores&quot;:8,
    &quot;utilization&quot;:16
  },
  &quot;os&quot;:{
    &quot;type&quot;:&quot;Windows 10&quot;,
    &quot;release&quot;:&quot;1.2&quot;,
    &quot;hostname&quot;:&quot;tsmith-pc&quot;,
    &quot;arch&quot;:&quot;amd64&quot;,
    &quot;user&quot;:{
      &quot;username&quot;:&quot;Tom Smith&quot;,
      &quot;homedir&quot;:&quot;C:\\Users\\TSmith&quot;,
      &quot;shell&quot;:&quot;&quot;
    }
  },
  &quot;process&quot;:{
    &quot;pid&quot;:7700,
    &quot;memory&quot;:{
      &quot;heapTotal&quot;:189792256,
      &quot;heapUsed&quot;:57524232
    },
    &quot;uptime&quot;:6021
  },
  &quot;client&quot;:{
    &quot;type&quot;:&quot;java&quot;,
    &quot;version&quot;:&quot;1.2.5&quot;,
    &quot;langVersion&quot;:&quot;1.8.0_162-ea&quot;
  },
  &quot;net&quot;:{
    &quot;ip&quot;:[
      &quot;192.168.12.13&quot;
    ]
  },
  &quot;time&quot;:{
    &quot;now&quot;:1579023307986,
    &quot;iso&quot;:&quot;2020-01-14T17:35:07.986Z&quot;,
    &quot;utc&quot;:&quot;Tue, 14 Jan 2020 17:35:07 GMT&quot;
  }
}

IP Addresses:
 192.168.12.13
CPU cores: 8
OS type: Windows 10
Homedir: C:\Users\TSmith
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/moleculer-java/site/edit/master/src/internal-services.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/7/2020, 4:13:12 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/site/events.html" class="prev">Events</a></span> <span class="next"><a href="/site/logging.html">Logging</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/site/assets/js/app.f5c17ca8.js" defer></script><script src="/site/assets/js/2.bdb50750.js" defer></script><script src="/site/assets/js/14.67e89b3a.js" defer></script>
  </body>
</html>
