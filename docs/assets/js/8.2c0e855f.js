(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[8],{

/***/ "../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"5d084cb4-vue-loader-template\"}!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib/loaders/templateLoader.js?!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/cache-loader/dist/cjs.js?!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib/index.js?!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/@vuepress/markdown-loader/index.js?!./events.md?vue&type=template&id=d230d980&":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** C:/Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"5d084cb4-vue-loader-template"}!C:/Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!C:/Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/cache-loader/dist/cjs.js??ref--1-0!C:/Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib??ref--1-1!C:/Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/@vuepress/markdown-loader??ref--1-2!./events.md?vue&type=template&id=d230d980& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ContentSlotsDistributor',{attrs:{"slot-key":_vm.$parent.slotKey}},[_c('p',[_vm._v("Molculer Service Broker has a built-in event bus for sending events to local and remote services.\nEvents can be used to create event-driven,\nruntime scalable applications from services\ndeployed on different operating systems and implemented in different languages.")]),_vm._v(" "),_c('p',[_vm._v("Events can be grouped; events can be sent to")]),_vm._v(" "),_c('ul',[_c('li',[_vm._v("a specific node")]),_vm._v(" "),_c('li',[_vm._v("to all listeners")]),_vm._v(" "),_c('li',[_vm._v("to a group of listeners")]),_vm._v(" "),_c('li',[_vm._v("or to one member from all groups")])]),_vm._v(" "),_c('h1',{attrs:{"id":"balanced-events"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#balanced-events"}},[_vm._v("#")]),_vm._v(" Balanced events")]),_vm._v(" "),_c('p',[_vm._v("The event listeners are arranged to logical groups.\nIt means that only one listener is triggered in every group.")]),_vm._v(" "),_c('blockquote',[_c('p',[_c('strong',[_vm._v("Example:")]),_vm._v(" An application contains 2 main services: "),_c('code',[_vm._v("users")]),_vm._v(" & "),_c('code',[_vm._v("payments")]),_vm._v(".\nBoth subscribe to the "),_c('code',[_vm._v("user.created")]),_vm._v(" event.\n3 instances of "),_c('code',[_vm._v("users")]),_vm._v(" service and 2 instances of "),_c('code',[_vm._v("payments")]),_vm._v(" service run.\nIf the "),_c('code',[_vm._v("user.created")]),_vm._v(" event is emitted, only one "),_c('code',[_vm._v("users")]),_vm._v(" and one "),_c('code',[_vm._v("payments")]),_vm._v(" service will receive this event.")])]),_vm._v(" "),_c('div',{attrs:{"align":"center"}},[_c('img',{attrs:{"src":"balanced-events.gif","alt":"Balanced events diagram"}})]),_vm._v(" "),_c('p',[_vm._v("The group name comes from the service name, but it can be overwritten in event definition in services\n(by the "),_c('code',[_vm._v("@Group")]),_vm._v(" Annotation).")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Example:")])]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token annotation punctuation"}},[_vm._v("@Name")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"payment\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("public")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("class")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("PaymentService")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("extends")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Service")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n\n    "),_c('span',{pre:true,attrs:{"class":"token annotation punctuation"}},[_vm._v("@Subscribe")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"order.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token annotation punctuation"}},[_vm._v("@Group")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"other\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Listener")]),_vm._v(" orderCreated "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" ctx "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Payload:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Sender:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("nodeID"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Metadata:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("getMeta")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"The called event name:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("name"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n        "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Example of parsing the \"params\" block:")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("String")]),_vm._v(" firstName "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("get")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"firstName\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"defaultValue\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("String")]),_vm._v(" lastName  "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("get")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"lastName\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("asString")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n")])])]),_c('h2',{attrs:{"id":"emit-balanced-events"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#emit-balanced-events"}},[_vm._v("#")]),_vm._v(" Emit balanced events")]),_vm._v(" "),_c('p',[_vm._v("Send balanced events with "),_c('code',[_vm._v("broker.emit")]),_vm._v(" function.\nThe first parameter is the name of the event, the second parameter is the payload.\n"),_c('em',[_vm._v("To send multiple/hierarchical values, wrap them into a "),_c('code',[_vm._v("Tree")]),_vm._v(" object.")])]),_vm._v(" "),_c('p',[_vm._v("Moleculer does not require a recommended JSON API, it uses an\n"),_c('a',{attrs:{"href":"https://berkesa.github.io/datatree/","target":"_blank","rel":"noopener noreferrer"}},[_vm._v("abstract API"),_c('OutboundLink')],1),_vm._v("\ninstead of a certain implementation.\nThe "),_c('code',[_vm._v("Tree")]),_vm._v(" object is an "),_c('strong',[_vm._v("abstract layer")]),_vm._v(" that uses an arbitrary JSON implementation.\nTree API supports 18 popular JSON implementations (eg. Jackson, Gson, Boon, Jodd, FastJson),\nand 10 non-JSON data formats (YAML, ION, BSON, MessagePack, etc.).\nBesides that Tree API adds manipulation capabilities to the underlaying JSON API,\nsuch as sorting, filtering, merging, cloning, or changing data types.\nThe specific JSON (or non-JSON) implementation can be configured\nin the Moleculer configuration (see in section \"Serializer\").\nRegardless of implementation, sending events looks like this:")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// The \"user\" is a \"Tree\" object (~=JSON structure)")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// that will be serialized for transport.")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Tree")]),_vm._v(" user "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("new")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Tree")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\nuser"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("put")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"firstName\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"John\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\nuser"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("put")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"lastName\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Doe\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Emit event")]),_vm._v("\nbroker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("emit")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" user"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('p',[_vm._v("Specify which groups/services shall receive the event:")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Only the \"mail\" & \"payments\" services receive this event")]),_vm._v("\nbroker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("emit")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" user"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Groups")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("of")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"mail\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"payments\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('h3',{attrs:{"id":"simplified-syntax-for-sending-key-value-pairs"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#simplified-syntax-for-sending-key-value-pairs"}},[_vm._v("#")]),_vm._v(" Simplified syntax for sending key-value pairs")]),_vm._v(" "),_c('p',[_vm._v("If the data structure to be sent consists only of key-value pairs,\nit is not necessary to create a "),_c('code',[_vm._v("Tree")]),_vm._v(" object.\nIt is enough to list the key-value pairs after the event name:")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_vm._v("ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("emit")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n         "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"firstName\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"John\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n         "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"lastName\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Doe\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n         "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Groups")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("of")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"mail\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"payments\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('p',[_vm._v("Creating a Tree object is required when passing more complex data structures between Nodes,\nwhich contain sub-structures (~=hierarchical JSON objects and JSON arrays).")]),_vm._v(" "),_c('h3',{attrs:{"id":"streaming-binary-files"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#streaming-binary-files"}},[_vm._v("#")]),_vm._v(" Streaming binary files")]),_vm._v(" "),_c('p',[_vm._v("In addition to JSON structures, it is possible to send large files\nand/or media content (videos, audio).")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Opening stream")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("PacketStream")]),_vm._v(" stream "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" broker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("createStream")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\nbroker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("emit")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"service.listener\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" stream"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Sending file...")]),_vm._v("\nstream"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("transferFrom")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("new")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("File")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"source.bin\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("then")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_vm._v("rsp "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// File submitted")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("catchError")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_vm._v("err "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Unexpected error occurred")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('p',[_vm._v("It is possible to send data immediately if we are not sending data from a file\n(for example, transmitting a microphone signal).")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Opening stream")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("PacketStream")]),_vm._v(" stream "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" broker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("createStream")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\nbroker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("emit")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"service.listener\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" stream"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Sending packets")]),_vm._v("\nstream"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("sendData")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"packet1\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("getBytes")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\nstream"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("sendData")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"packet2\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("getBytes")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\nstream"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("sendData")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"packet3\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("getBytes")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Streams must be closed!")]),_vm._v("\nstream"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("sendClose")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('h1',{attrs:{"id":"broadcast-event"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#broadcast-event"}},[_vm._v("#")]),_vm._v(" Broadcast event")]),_vm._v(" "),_c('p',[_vm._v("The broadcast event is sent to all available local & remote services.\nIt is not balanced, all event listener instances receive this event.")]),_vm._v(" "),_c('div',{attrs:{"align":"center"}},[_c('img',{attrs:{"src":"broadcast-events.gif","alt":"Broadcast events diagram"}})]),_vm._v(" "),_c('p',[_vm._v("Send broadcast events with "),_c('code',[_vm._v("broker.broadcast")]),_vm._v(" method.")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// The \"config\" is a hierarchical (~=JSON) structure")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Tree")]),_vm._v(" config "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("new")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Tree")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\nconfig"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("put")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"key\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"value\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\nconfig"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("putList")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"anArray\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("add")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("1")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("add")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("2")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("add")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("3")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\nconfig"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("putMap")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"anObject\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("put")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"port\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token number"}},[_vm._v("1234")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("put")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"host\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"server1\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Send \"config\" to all listeners")]),_vm._v("\nbroker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("broadcast")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"config.changed\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" config"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('p',[_vm._v("Specify which groups/services shall receive the event:")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Send to all \"mail\" service instances")]),_vm._v("\nbroker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("broadcast")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" user"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Groups")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("of")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"mail\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Send to all \"user\" & \"purchase\" service instances.")]),_vm._v("\nbroker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("broadcast")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" user"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Groups")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("of")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"purchase\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Same thing, but with simplified syntax")]),_vm._v("\nctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("broadcast")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n              "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"firstName\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"John\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n              "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"lastName\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Doe\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v("\n              "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Groups")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("of")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"purchase\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('h2',{attrs:{"id":"local-broadcast-event"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#local-broadcast-event"}},[_vm._v("#")]),_vm._v(" Local broadcast event")]),_vm._v(" "),_c('p',[_vm._v("Send broadcast events only to all local services with "),_c('code',[_vm._v("broker.broadcastLocal")]),_vm._v(" method.")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_vm._v("broker"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("broadcastLocal")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"config.changed\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" config"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('h1',{attrs:{"id":"subscribe-to-events"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#subscribe-to-events"}},[_vm._v("#")]),_vm._v(" Subscribe to events")]),_vm._v(" "),_c('p',[_vm._v("The contents of the events are wrapped in an object called Event Context to receive the message.\nThe Event Context is very similar to Action Context.")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Context-based event handler & emit a nested event")])]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token annotation punctuation"}},[_vm._v("@Name")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"accounts\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("public")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("class")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("AccountService")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("extends")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Service")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n\n    "),_c('span',{pre:true,attrs:{"class":"token annotation punctuation"}},[_vm._v("@Subscribe")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Listener")]),_vm._v(" userCreated "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" ctx "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Payload:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Sender:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("nodeID"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Metadata:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("getMeta")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"The called event name:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("name"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n        "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Emit a new, nested Event")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Tree")]),_vm._v(" payload "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("new")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Tree")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        payload"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("copyFrom")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_vm._v("ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("emit")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"accounts.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" payload"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n")])])]),_c('p',[_c('strong',[_vm._v("Wildcards")])]),_vm._v(" "),_c('p',[_vm._v("Wildcards ("),_c('code',[_vm._v("?")]),_vm._v(", "),_c('code',[_vm._v("*")]),_vm._v(", "),_c('code',[_vm._v("**")]),_vm._v(") can be used when making event subscriptions.")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("public")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("class")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("MyService")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("extends")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Service")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n\n    "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Subscribe to \"user.created\" event")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token annotation punctuation"}},[_vm._v("@Subscribe")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user.created\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Listener")]),_vm._v(" userCreated "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" ctx "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"User created event received:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n\n    "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Subscribe to all \"user\" events")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token annotation punctuation"}},[_vm._v("@Subscribe")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"user.*\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Listener")]),_vm._v(" userEvents "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" ctx "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"User event event received:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        \n    "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Subscribe to all internal events")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// (internal event names start with \"$\" prefix)")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token annotation punctuation"}},[_vm._v("@Subscribe")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"$**\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Listener")]),_vm._v(" internalEvents "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" ctx "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n        logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"Event \"")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("+")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("name "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("+")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\" received:\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("params"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n        \n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n")])])]),_c('p',[_c('strong',[_vm._v("Invisible (private or internal) Event Listeners")])]),_vm._v(" "),_c('p',[_vm._v("With the \"private\" modifier, only the local events are monitored by the Event Listener.\nSuch Event Listeners are invisible from the outside of the Node,\nand cannot be called from other Service Brokers.")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_c('span',{pre:true,attrs:{"class":"token annotation punctuation"}},[_vm._v("@Subscribe")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"$services.changed\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("private")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("Listener")]),_vm._v(" listener "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("=")]),_vm._v(" ctx "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n    logger"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("info")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"The list of services has changed!\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('p',[_c('strong',[_vm._v("Redirecting streamed content")])]),_vm._v(" "),_c('p',[_vm._v("Stream data can be redirected to a File, ByteChannel or OutputStream.")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_vm._v("ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("stream"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("transferTo")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("new")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token class-name"}},[_vm._v("File")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token string"}},[_vm._v("\"/temp.bin\"")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("then")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_vm._v("rsp "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// File received and saved successfully")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("catchError")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_vm._v("err "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Unexpected error occurred")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('p',[_c('strong',[_vm._v("Processing streamed content")])]),_vm._v(" "),_c('p',[_vm._v("Stream data can also be processed per packet.")]),_vm._v(" "),_c('div',{staticClass:"language-java extra-class"},[_c('pre',{pre:true,attrs:{"class":"language-java"}},[_c('code',[_vm._v("ctx"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_vm._v("stream"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(".")]),_c('span',{pre:true,attrs:{"class":"token function"}},[_vm._v("onPacket")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_vm._v("bytes"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" error"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(",")]),_vm._v(" closed"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("->")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("if")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_vm._v("bytes "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("!=")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("null")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// A byte-array has arrived")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("if")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_vm._v("error "),_c('span',{pre:true,attrs:{"class":"token operator"}},[_vm._v("!=")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("null")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Error occurred")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token keyword"}},[_vm._v("if")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("(")]),_vm._v("closed"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_vm._v(" "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("{")]),_vm._v("\n        "),_c('span',{pre:true,attrs:{"class":"token comment"}},[_vm._v("// Incoming stream closed (EOF)")]),_vm._v("\n    "),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_vm._v("\n"),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v("}")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(")")]),_c('span',{pre:true,attrs:{"class":"token punctuation"}},[_vm._v(";")]),_vm._v("\n")])])]),_c('h1',{attrs:{"id":"context"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#context"}},[_vm._v("#")]),_vm._v(" Context")]),_vm._v(" "),_c('p',[_vm._v("When you emit an event, the broker creates a "),_c('code',[_vm._v("Context")]),_vm._v(" instance which contains all\nrequest information and passes it to the event handler as a single argument.")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Available properties & methods of "),_c('code',[_vm._v("Context")]),_vm._v(":")])]),_vm._v(" "),_c('table',[_c('thead',[_c('tr',[_c('th',[_vm._v("Name")]),_vm._v(" "),_c('th',[_vm._v("Type")]),_vm._v(" "),_c('th',[_vm._v("Description")])])]),_vm._v(" "),_c('tbody',[_c('tr',[_c('td',[_c('code',[_vm._v("ctx.id")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("String")])]),_vm._v(" "),_c('td',[_vm._v("Unique Context ID.")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.name")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("String")])]),_vm._v(" "),_c('td',[_vm._v("Name of the event.")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.params")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("Tree")])]),_vm._v(" "),_c('td',[_vm._v("Request params. Contains meta-data ("),_c('code',[_vm._v("ctx.params.getMeta()")]),_vm._v(").")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.level")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("int")])]),_vm._v(" "),_c('td',[_vm._v("Request level (in nested-calls). The first level is "),_c('code',[_vm._v("1")]),_vm._v(".")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.nodeID")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("String")])]),_vm._v(" "),_c('td',[_vm._v("The caller or target Node ID.")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.parentID")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("String")])]),_vm._v(" "),_c('td',[_vm._v("Parent context ID (in nested-calls).")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.requestID")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("String")])]),_vm._v(" "),_c('td',[_vm._v("Request ID (does not change during the call chain).")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.stream")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("PacketStream")])]),_vm._v(" "),_c('td',[_vm._v("Streamed content (large files or real-time media).")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.opts")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("Options")])]),_vm._v(" "),_c('td',[_vm._v("Calling options.")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.call()")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("Method")])]),_vm._v(" "),_c('td',[_vm._v("Make nested-calls. Same arguments like in "),_c('code',[_vm._v("broker.call")])])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.emit()")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("Method")])]),_vm._v(" "),_c('td',[_vm._v("Emit an event, same as "),_c('code',[_vm._v("broker.emit")])])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("ctx.broadcast()")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("Method")])]),_vm._v(" "),_c('td',[_vm._v("Broadcast an event, same as "),_c('code',[_vm._v("broker.broadcast")])])])])]),_vm._v(" "),_c('h1',{attrs:{"id":"internal-events"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#internal-events"}},[_vm._v("#")]),_vm._v(" Internal events")]),_vm._v(" "),_c('p',[_vm._v("The broker broadcasts some internal events.\nInternal events always starts with "),_c('code',[_vm._v("$")]),_vm._v(" prefix.")]),_vm._v(" "),_c('h2',{attrs:{"id":"services-changed"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#services-changed"}},[_vm._v("#")]),_vm._v(" "),_c('code',[_vm._v("$services.changed")])]),_vm._v(" "),_c('p',[_vm._v("The broker sends this event if the local node or a remote node loads or destroys services.")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Payload")])]),_vm._v(" "),_c('table',[_c('thead',[_c('tr',[_c('th',[_vm._v("Name")]),_vm._v(" "),_c('th',[_vm._v("Type")]),_vm._v(" "),_c('th',[_vm._v("Description")])])]),_vm._v(" "),_c('tbody',[_c('tr',[_c('td',[_c('code',[_vm._v("localService")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("boolean")])]),_vm._v(" "),_c('td',[_vm._v("True if a local service changed.")])])])]),_vm._v(" "),_c('h2',{attrs:{"id":"node-connected"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#node-connected"}},[_vm._v("#")]),_vm._v(" "),_c('code',[_vm._v("$node.connected")])]),_vm._v(" "),_c('p',[_vm._v("The broker sends this event when a node connected or reconnected.")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Payload")])]),_vm._v(" "),_c('table',[_c('thead',[_c('tr',[_c('th',[_vm._v("Name")]),_vm._v(" "),_c('th',[_vm._v("Type")]),_vm._v(" "),_c('th',[_vm._v("Description")])])]),_vm._v(" "),_c('tbody',[_c('tr',[_c('td',[_c('code',[_vm._v("node")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("Tree")])]),_vm._v(" "),_c('td',[_vm._v("Node info object")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("reconnected")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("boolean")])]),_vm._v(" "),_c('td',[_vm._v("Is reconnected?")])])])]),_vm._v(" "),_c('h2',{attrs:{"id":"node-updated"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#node-updated"}},[_vm._v("#")]),_vm._v(" "),_c('code',[_vm._v("$node.updated")])]),_vm._v(" "),_c('p',[_vm._v("The broker sends this event when it has received an INFO message from a node\n(ie. a service is loaded or destroyed).")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Payload")])]),_vm._v(" "),_c('table',[_c('thead',[_c('tr',[_c('th',[_vm._v("Name")]),_vm._v(" "),_c('th',[_vm._v("Type")]),_vm._v(" "),_c('th',[_vm._v("Description")])])]),_vm._v(" "),_c('tbody',[_c('tr',[_c('td',[_c('code',[_vm._v("node")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("Tree")])]),_vm._v(" "),_c('td',[_vm._v("Node info object")])])])]),_vm._v(" "),_c('h2',{attrs:{"id":"node-disconnected"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#node-disconnected"}},[_vm._v("#")]),_vm._v(" "),_c('code',[_vm._v("$node.disconnected")])]),_vm._v(" "),_c('p',[_vm._v("The broker sends this event when a node disconnected (gracefully or unexpectedly).")]),_vm._v(" "),_c('p',[_c('strong',[_vm._v("Payload")])]),_vm._v(" "),_c('table',[_c('thead',[_c('tr',[_c('th',[_vm._v("Name")]),_vm._v(" "),_c('th',[_vm._v("Type")]),_vm._v(" "),_c('th',[_vm._v("Description")])])]),_vm._v(" "),_c('tbody',[_c('tr',[_c('td',[_c('code',[_vm._v("node")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("Tree")])]),_vm._v(" "),_c('td',[_vm._v("Node info object")])]),_vm._v(" "),_c('tr',[_c('td',[_c('code',[_vm._v("unexpected")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("boolean")])]),_vm._v(" "),_c('td',[_c('code',[_vm._v("true")]),_vm._v(" - Not received heartbeat, "),_c('code',[_vm._v("false")]),_vm._v(" - Received "),_c('code',[_vm._v("DISCONNECT")]),_vm._v(" message from node.")])])])]),_vm._v(" "),_c('h2',{attrs:{"id":"broker-started"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#broker-started"}},[_vm._v("#")]),_vm._v(" "),_c('code',[_vm._v("$broker.started")])]),_vm._v(" "),_c('p',[_vm._v("The broker sends this event once "),_c('code',[_vm._v("broker.start()")]),_vm._v(" is called and all local services are started.")]),_vm._v(" "),_c('h2',{attrs:{"id":"broker-stopped"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#broker-stopped"}},[_vm._v("#")]),_vm._v(" "),_c('code',[_vm._v("$broker.stopped")])]),_vm._v(" "),_c('p',[_vm._v("The broker sends this event once "),_c('code',[_vm._v("broker.stop()")]),_vm._v(" is called and all local services are stopped.")]),_vm._v(" "),_c('h2',{attrs:{"id":"transporter-connected"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#transporter-connected"}},[_vm._v("#")]),_vm._v(" "),_c('code',[_vm._v("$transporter.connected")])]),_vm._v(" "),_c('p',[_vm._v("The transporter sends this event once the transporter is connected.")]),_vm._v(" "),_c('h2',{attrs:{"id":"transporter-disconnected"}},[_c('a',{staticClass:"header-anchor",attrs:{"href":"#transporter-disconnected"}},[_vm._v("#")]),_vm._v(" "),_c('code',[_vm._v("$transporter.disconnected")])]),_vm._v(" "),_c('p',[_vm._v("The transporter sends this event once the transporter is disconnected.")])])}
var staticRenderFns = []



/***/ }),

/***/ "./events.md":
/*!*******************!*\
  !*** ./events.md ***!
  \*******************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _events_md_vue_type_template_id_d230d980___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./events.md?vue&type=template&id=d230d980& */ "./events.md?vue&type=template&id=d230d980&");
/* harmony import */ var _Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib/runtime/componentNormalizer.js */ "../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib/runtime/componentNormalizer.js");

var script = {}


/* normalize component */

var component = Object(_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_1__["default"])(
  script,
  _events_md_vue_type_template_id_d230d980___WEBPACK_IMPORTED_MODULE_0__["render"],
  _events_md_vue_type_template_id_d230d980___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ "./events.md?vue&type=template&id=d230d980&":
/*!**************************************************!*\
  !*** ./events.md?vue&type=template&id=d230d980& ***!
  \**************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_cache_loader_dist_cjs_js_cacheDirectory_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_5d084cb4_vue_loader_template_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_cache_loader_dist_cjs_js_ref_1_0_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vue_loader_lib_index_js_ref_1_1_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vuepress_markdown_loader_index_js_ref_1_2_events_md_vue_type_template_id_d230d980___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/@vuepress/core/node_modules/.cache/vuepress","cacheIdentifier":"5d084cb4-vue-loader-template"}!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib??ref--1-1!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/@vuepress/markdown-loader??ref--1-2!./events.md?vue&type=template&id=d230d980& */ "../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/@vuepress/core/node_modules/.cache/vuepress\",\"cacheIdentifier\":\"5d084cb4-vue-loader-template\"}!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib/loaders/templateLoader.js?!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/cache-loader/dist/cjs.js?!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/vue-loader/lib/index.js?!../../../../Users/András/AppData/Roaming/npm/node_modules/vuepress/node_modules/@vuepress/markdown-loader/index.js?!./events.md?vue&type=template&id=d230d980&");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_cache_loader_dist_cjs_js_cacheDirectory_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_5d084cb4_vue_loader_template_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_cache_loader_dist_cjs_js_ref_1_0_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vue_loader_lib_index_js_ref_1_1_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vuepress_markdown_loader_index_js_ref_1_2_events_md_vue_type_template_id_d230d980___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_cache_loader_dist_cjs_js_cacheDirectory_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vuepress_core_node_modules_cache_vuepress_cacheIdentifier_5d084cb4_vue_loader_template_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_cache_loader_dist_cjs_js_ref_1_0_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vue_loader_lib_index_js_ref_1_1_Users_Andr_s_AppData_Roaming_npm_node_modules_vuepress_node_modules_vuepress_markdown_loader_index_js_ref_1_2_events_md_vue_type_template_id_d230d980___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ })

}]);
//# sourceMappingURL=8.2c0e855f.js.map