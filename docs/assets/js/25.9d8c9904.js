(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{230:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"about-data-serialization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#about-data-serialization"}},[t._v("#")]),t._v(" About data serialization")]),t._v(" "),a("p",[a("router-link",{attrs:{to:"/transporters.html#types-of-transporters"}},[t._v("Transporter")]),t._v("\nneeds a "),a("code",[t._v("Serializer")]),t._v(" Module which serializes & deserializes the transferable data.\nThe default "),a("code",[t._v("Serializer")]),t._v(" is the "),a("code",[t._v("JsonSerializer")]),t._v(" but there are several built-in "),a("code",[t._v("Serializers")]),t._v("\ncan convert messages into MessagePack, BSON, CBOR, SMILE, Amazon ION or other binary formats.")],1),t._v(" "),a("h2",{attrs:{id:"json-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#json-serializer"}},[t._v("#")]),t._v(" JSON Serializer")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img.shields.io/badge/Node.js-Compatible-brightgreen.svg",alt:""}}),a("br"),t._v("\nThis is the built-in default "),a("code",[t._v("Serializer")]),t._v(".\nIt serializes the packets to JSON string and deserializes the received JSON bytes to\n"),a("a",{attrs:{href:"https://berkesa.github.io/datatree/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tree"),a("OutboundLink")],1),t._v(" objects.\nThe performance of JSON "),a("code",[t._v("Serializers")]),t._v(" in Java and JavaScript is very good,\nJSON serialization is usually faster than most binary "),a("code",[t._v("Serializers")]),t._v(".\nThis "),a("code",[t._v("Serializer")]),t._v(" is compatible with the JavaScript/Go version of Moleculer.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NatsTransporter")]),t._v(" transporter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NatsTransporter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nats://nats.server:4222"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Do not have to set it because this is the default")]),t._v("\ntransporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JsonSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),t._v(" broker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nodeID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"server-1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transporter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jackson,boon"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jackson,fast"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v('The "readers" and "writers" parameters are used to specify the JSON API\nto be used by Moleculer for deserialization / serialization.\nThis is important if you have multiple JSON implementations on the classpath.\nSeveral implementations can be specified in order of importance, separated by commas.\nIf not specified, '),a("code",[t._v("ServiceBroker")]),t._v(' will automatically try to choose the fastest JSON API.\nThe values of the "readers" and "writers" parameters are listed below:')]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Reader/writer ID")]),t._v(" "),a("th",[t._v("JSON API and Dependency")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v('"boon"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/io.fastjson/boon",target:"_blank",rel:"noopener noreferrer"}},[t._v("Boon JSON API"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"bson"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/org.mongodb/bson",target:"_blank",rel:"noopener noreferrer"}},[t._v("BSON (MongoDB)"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"dsl"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.dslplatform/dsl-json",target:"_blank",rel:"noopener noreferrer"}},[t._v("DSLJson"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"fast"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.alibaba/fastjson",target:"_blank",rel:"noopener noreferrer"}},[t._v("FastJson"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"flex"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/net.sf.flexjson/flexjson",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flexjson"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"genson"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.owlike/genson",target:"_blank",rel:"noopener noreferrer"}},[t._v("Genson"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"gson"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.google.code.gson/gson",target:"_blank",rel:"noopener noreferrer"}},[t._v("Google Gson"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"jackson"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jackson JSON"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"jodd"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/org.jodd/jodd-json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jodd Json"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"johnzon"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/org.apache.johnzon/johnzon-mapper",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apache Johnzon"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"jsonio"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.cedarsoftware/json-io",target:"_blank",rel:"noopener noreferrer"}},[t._v("JsonIO"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"nano"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.grack/nanojson",target:"_blank",rel:"noopener noreferrer"}},[t._v("NanoJson"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"simple"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSON.simple"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"smart"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/net.minidev/json-smart",target:"_blank",rel:"noopener noreferrer"}},[t._v("Json-smart"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"sojo"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/net.sf.sojo/sojo",target:"_blank",rel:"noopener noreferrer"}},[t._v("SOJO"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"util"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/org.kopitubruk.util/JSONUtil",target:"_blank",rel:"noopener noreferrer"}},[t._v("JsonUtil"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"ion"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/software.amazon.ion/ion-java",target:"_blank",rel:"noopener noreferrer"}},[t._v("Amazon Ion"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"jsoniter"')]),t._v(" "),a("td",[a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.jsoniter/jsoniter",target:"_blank",rel:"noopener noreferrer"}},[t._v("Json Iterator"),a("OutboundLink")],1)])]),t._v(" "),a("tr",[a("td",[t._v('"builtin"')]),t._v(" "),a("td",[t._v("Built-in JSON parser (no dependencies)")])])])]),t._v(" "),a("p",[t._v('So, for example, if you want to use a "FastJSON" implementation,\nput the implementation reference in the "dependencies" block of the (build.gradle or pom.xml) build script,\nthen set "readers" and "writers" to "fast". To verify, type "info" command into the REPL console.\nThe "info" command will display the current Moleculer configuration, including the the JSON API which is in use.')]),t._v(" "),a("h2",{attrs:{id:"messagepack-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#messagepack-serializer"}},[t._v("#")]),t._v(" MessagePack Serializer")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img.shields.io/badge/Node.js-Compatible-brightgreen.svg",alt:""}}),a("br"),t._v("\nBuilt-in "),a("a",{attrs:{href:"https://msgpack.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("MsgPack"),a("OutboundLink")],1),t._v(" "),a("code",[t._v("Serializer")]),t._v(".\nMessagePack is an efficient binary serialization format. It lets you exchange\ndata among multiple languages like JSON. But it's smaller. Small\nintegers are encoded into a single byte, and typical short strings require\nonly one extra byte in addition to the strings themselves. This "),a("code",[t._v("Serializer")]),t._v(" is\ncompatible with the JavaScript version of Moleculer.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MsgPackSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("MessagePack dependencies")]),t._v(" "),a("p",[t._v("To use MessagePack "),a("code",[t._v("Serializer")]),t._v(", add the following dependency to the build script:"),a("br"),t._v(" "),a("a",{attrs:{href:"https://mvnrepository.com/artifact/org.msgpack/msgpack",target:"_blank",rel:"noopener noreferrer"}},[t._v("group: 'org.msgpack', name: 'msgpack', version: '0.6.12'"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"bson-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bson-serializer"}},[t._v("#")]),t._v(" BSON Serializer")]),t._v(" "),a("p",[t._v("Built-in "),a("a",{attrs:{href:"http://bsonspec.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("BSON"),a("OutboundLink")],1),t._v(" "),a("code",[t._v("Serializer")]),t._v(".\nBSON, short for Binary JSON, is a binary-encoded serialization of JSON-like documents.\nLike JSON, BSON supports the embedding of documents and arrays within other documents and arrays.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BsonSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("BSON dependencies")]),t._v(" "),a("p",[t._v("To use BSON "),a("code",[t._v("Serializer")]),t._v(", add the following dependency to the build script:"),a("br"),t._v(" "),a("a",{attrs:{href:"https://mvnrepository.com/artifact/de.undercouch/bson4jackson",target:"_blank",rel:"noopener noreferrer"}},[t._v("group: 'de.undercouch', name: 'bson4jackson', version: '2.9.2'"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"cbor-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cbor-serializer"}},[t._v("#")]),t._v(" CBOR Serializer")]),t._v(" "),a("p",[t._v("Built-in "),a("a",{attrs:{href:"https://cbor.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CBOR"),a("OutboundLink")],1),t._v(" "),a("code",[t._v("Serializer")]),t._v(".\nCBOR is based on the wildly successful JSON data model: numbers, strings,\narrays, maps (called objects in JSON), and a few values such as false, true,\nand null.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CborSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("CBOR dependencies")]),t._v(" "),a("p",[t._v("To use CBOR "),a("code",[t._v("Serializer")]),t._v(", add the following dependency to the build script:"),a("br"),t._v(" "),a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-cbor",target:"_blank",rel:"noopener noreferrer"}},[t._v("group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-cbor', version: '2.10.1'"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"amazon-ion-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#amazon-ion-serializer"}},[t._v("#")]),t._v(" Amazon ION Serializer")]),t._v(" "),a("p",[t._v("Built-in "),a("a",{attrs:{href:"http://amzn.github.io/ion-docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ION"),a("OutboundLink")],1),t._v(" "),a("code",[t._v("Serializer")]),t._v(".\nAmazon Ion is a richly-typed, self-describing, hierarchical data\nserialization format offering interchangeable binary and text\nrepresentations. The binary representation is efficient to store, transmit,\nand skip-scan parse.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IonSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Amazon ION dependencies")]),t._v(" "),a("p",[t._v("To use ION "),a("code",[t._v("Serializer")]),t._v(", add the following dependency to the build script:"),a("br"),t._v(" "),a("a",{attrs:{href:"https://mvnrepository.com/artifact/software.amazon.ion/ion-java",target:"_blank",rel:"noopener noreferrer"}},[t._v("group: 'software.amazon.ion', name: 'ion-java', version: '1.5.1'"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"smile-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#smile-serializer"}},[t._v("#")]),t._v(" SMILE Serializer")]),t._v(" "),a("p",[t._v("Built-in "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Smile_(data_interchange_format)",target:"_blank",rel:"noopener noreferrer"}},[t._v("SMILE"),a("OutboundLink")],1),t._v(" "),a("code",[t._v("Serializer")]),t._v(".\nSMILE is a computer data interchange format based on JSON. It can also be\nconsidered as a binary serialization of generic JSON data model, which means\nthat tools that operate on JSON may be used with SMILE as well, as long as\nproper encoder/decoder exists for tool to use. Compared to JSON, SMILE is\nboth more compact and more efficient to process.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmileSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("SMILE dependencies")]),t._v(" "),a("p",[t._v("To use SMILE "),a("code",[t._v("Serializer")]),t._v(", add the following dependency to the build script:"),a("br"),t._v(" "),a("a",{attrs:{href:"https://mvnrepository.com/artifact/com.fasterxml.jackson.dataformat/jackson-dataformat-smile",target:"_blank",rel:"noopener noreferrer"}},[t._v("group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-smile', version: '2.10.1'"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"custom-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-serializer"}},[t._v("#")]),t._v(" Custom Serializer")]),t._v(" "),a("p",[t._v("Custom "),a("code",[t._v("Serializer")]),t._v(" module can be created.\nTo make your own "),a("code",[t._v("Serializer")]),t._v(", you need to derive it from the services.moleculer.serializer."),a("code",[t._v("Serializer")]),t._v('\nsuperclass, and implement the "write" and "read" methods.')]),t._v(" "),a("p",[a("strong",[t._v("Create custom Serializer")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomSerializer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Serializer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// --- SERIALIZE TREE TO BYTE ARRAY ---")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Tree")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("asObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Write Java Object into byte array...")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// The "content" is "java.util.Map" or "java.util.List".')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// --- DESERIALIZE BYTE ARRAY TO TREE ---")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Tree")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("byte")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Read Java Object from "source"...')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CheckedTree")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("Use custom Serializer")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"message-level-encryption"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#message-level-encryption"}},[t._v("#")]),t._v(" Message-level encryption")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("BlockCipherSerializer")]),t._v(' is capable of encrypting data packets using the specified algorithm.\nYou can give it a "parent" '),a("code",[t._v("Serializer")]),t._v(",\nif not specified it uses JSON serialization before encryption.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockCipherSerializer")]),t._v(" serializer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockCipherSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Same as "aes-256-cbc" in Node.js')]),t._v("\nserializer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAlgorithm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AES/CBC/PKCS5Padding"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Algorithm")]),t._v("\nserializer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"12345678901234567890123456789012"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 32 bytes of password")]),t._v("\nserializer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIv")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1234567890123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 16 bytes of IV block - required for AES/CBC")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create Transporter and Service Broker")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Transporter")]),t._v(" transporter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NatsTransporter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntransporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("serializer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),t._v(" broker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nodeID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transporter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("In Node.js-based Moleculer, code with similar functionality looks like this:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// JavaScript code")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" broker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    transporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NATS"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    middlewares"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        Middlewares"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Transmit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Encryption")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"12345678901234567890123456789012"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Password")]),t._v("\n                                        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aes-256-cbc"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Algorithm")]),t._v("\n                                        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1234567890123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 16 bytes of IV block")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"compressing-messages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#compressing-messages"}},[t._v("#")]),t._v(" Compressing messages")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("DeflaterSerializer")]),t._v(' can compress messages larger than the specified size.\nIt can also have a "parent" '),a("code",[t._v("Serializer")]),t._v(",\nif not specified it uses JSON serialization before compression.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Transporter")]),t._v(" transporter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NatsTransporter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntransporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeflaterSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create Service Broker")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),t._v(" broker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nodeID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transporter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("In Node.js-based Moleculer, code with similar functionality looks like this:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" broker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    transporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NATS"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    middlewares"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        Middlewares"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Transmit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Compression")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deflateRaw"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                           threshold"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"512b"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("Using compression reduces performance, so use it only on slow networks.")])]),t._v(" "),a("h2",{attrs:{id:"chaining-serializers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chaining-serializers"}},[t._v("#")]),t._v(" Chaining Serializers")]),t._v(" "),a("p",[t._v("By chaining "),a("code",[t._v("Serializers")]),t._v(", you can combine multiple "),a("code",[t._v("Serializers")]),t._v(".\nIn the example below, the data is first serialized using the MessagePack algorithm.\nDeflater then compresses large data packets (larger than 1024 bytes)\nand then encrypts the compressed packet using the AES algorithm:")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Transporter")]),t._v(" natsTransporter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NatsTransporter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create Serializer-chain")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MsgPackSerializer")]),t._v(" msgPack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MsgPackSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeflaterSerializer")]),t._v(" deflater "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DeflaterSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msgPack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockCipherSerializer")]),t._v(" cipher "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockCipherSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deflater"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1234567890123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Set Serializer-chain to Transporter")]),t._v("\nnatsTransporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cipher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create Service Broker")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),t._v(" broker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nodeID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transporter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("natsTransporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("Double encryption")])]),t._v(" "),a("p",[t._v('Chaining allows multiple encryption methods to be applied to a data packet.\nIn the example below,\nthe data is first encrypted using the "ARCFOUR" and then the "Blowfish" algorithm:')]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create JSON Serializer")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JsonSerializer")]),t._v(" jsonSerializer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JsonSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// First cipher")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockCipherSerializer")]),t._v(" first "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockCipherSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonSerializer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ARCFOUR"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Second cipher")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockCipherSerializer")]),t._v(" second "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockCipherSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                         "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                         "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Blowfish"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Set Serializer-chain to Transporter")]),t._v("\ntransporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSerializer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("second"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create Service Broker")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),t._v(" broker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceBroker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nodeID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transporter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("transporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);